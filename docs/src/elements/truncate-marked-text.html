<html><head><link rel="import" href="../../bower_components/polymer/polymer.html">

<link rel="import" href="../../bower_components/marked-element/marked-element.html">

<link rel="import" href="../styles/shared-styles.html">


</head><body><dom-module id="truncate-marked-text">

  <style include="shared-styles">.markdown-html{@apply (--truncate-marked-text-style);}</style>

  <template>

    <marked-element markdown="[[_outputText]]">
      <div class="markdown-html"></div>
    </marked-element>

  </template>

  <script>!function(){"use strict";Polymer({is:"truncate-marked-text",properties:{characters:{type:Number},words:{type:Number},breakLastWord:{type:Boolean,value:!1},text:{type:String,observer:"truncate"},_outputText:{type:String,notify:!0}},truncate:function(){this.words&&!this.characters?this._outputText=this._truncateByWords(this.text,this.words):this._outputText=this._truncateByCharacters(this.text,this.characters,this.breakLastWord)},_truncateByWords:function(t,r){if(isNaN(r))return t;if(r<=0)return"";if(t){var e=t.split(/\s+/);e.length>r&&(t=e.slice(0,r).join(" ")+"...")}return t},_truncateByCharacters:function(t,r,e){if(isNaN(r))return t;if(r<=0)return"";if(t&&t.length>r){if(t=t.trim().substring(0,r),e)for(;" "===t.charAt(t.length-1);)t=t.substr(0,t.length-1);else{var s=t.lastIndexOf(" ");s!==-1&&(t=t.substr(0,s))}return t+"..."}return t}})}();</script>

</dom-module>
</body></html>