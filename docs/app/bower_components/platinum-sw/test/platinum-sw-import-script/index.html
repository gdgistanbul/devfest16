<!DOCTYPE html><html><head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1,user-scalable=yes">

    <script src="../../../webcomponentsjs/webcomponents-lite.js"></script>
    <script src="../../../web-component-tester/browser.js"></script>
    <script src="../controlled-promise.js"></script>

    <link rel="import" href="../../platinum-sw-register.html">
    <link rel="import" href="../../platinum-sw-import-script.html">
  </head>

  <body>
    <platinum-sw-register skip-waiting="" clients-claim="" auto-register="">
      <platinum-sw-import-script href="post-message-echo.js"></platinum-sw-import-script>
    </platinum-sw-register>

    <script>suite("Importing Service Worker Scripts",function(){test("message handler is registered via imported script",function(e){return window._controlledPromise.then(function(t){var n="hello",r=new MessageChannel;r.port1.onmessage=function(t){assert.equal(t.data,n),e()},t.active.postMessage(n,[r.port2])})})});</script>
  

</body></html>